# 4. Layouts e responsive web design

Responsive web design permite que uma página web apareça adequadamente em todos os equipamentos apenas com recurso a CSS e HTML sem necessidade ou recurso a javascript.

## Display

Este propriedade define como o elemento é apresentado numa página. Todos os elementos têm um display por default. Por ex. os links `<a>`, as imagens `<img>` ou os `<span>`são elementos com display **inline**. Já por ex. as `<div>` e os parágrafos `<p>` são elementos com display **block**

Os tipos de display mais comuns são:

**`block`**:  bloco retangular na página que ocupa, por defeito, toda a largura do elemento pai e começam sempre numa nova linha. As suas dimensões são configuráveis.

**`inline`**: os elementos são colocadas uns a seguir aos outros na mesma linha, se possível. Existem uma variação, a `inline-block` que permite colocar os elementos em linha mas garante as propriedade do `block`. Este display é muito usado quando queremos configurar uma menu horizontal com recurso a `<li>`.

>[!tip] Espaço entre elementos inline
>Os browsers adicionam um espaço entre os elementos com display `inline`, à semelhança dos espaço entre palavras. Este espaço uma grande parte das vezes não se pretende, pelo que existem alguns workarounds para os eliminar. Uma das formas é a apresentada no snippet a seguir, colocando o inicio de um elemento imediatamente a seguir ao fecho do anterior. ([ver mais](https://css-tricks.com/fighting-the-space-between-inline-block-elements/))

```html
<header>...</header>
<section>
  ...
</section><section>
  ...
</section><section>
  ...
</section>
<footer>...</footer>
```

**`none`**: Esconde o elemento

**`flex`**: Define um elemento como um flex container. Este elemento passa ter um comportamento que está ligado directamente ao seus elementos filho diretos. (ver secção Flexbox)

### Float

A propriedade css `float` especifica que o elemento html deve ser retirado do fluxo normal de rendering para ser colocado à esquerda ou direita dentro do seu elemento pai. Não existe float ao centro. Se existirem elementos com display inline este vão rodeá-lo conforme os espaço disponível.


CSS property specifies that an element should be taken from the normal flow and placed along the left or right side of its container, where text and inline elements will wrap around it.

Neste exemplo, temos duas caixas, uma vai flutuar à esquerda e a outra vai flutuar à direita. Como as suas larguras não ultrapassam 100% do elemento pai, elas vão ficar lado a lado.
```css
 .floatLeft {
    float: left;
    background-color: lightyellow;
    width: 80%;
    height: 300px;
}

.floatRight {
    float: right;
    background-color: lightblue;
    width: 20%;
    height: 300px;
}

<div>
	<div class="floatLeft"><p> Float left DIV </p></div>
	<div class="floatRight"><p> Float right DIV </p></div>
</div>
```

Se colocarmos vários elemento a flutuar à esquerda, eles vão-se alinhando sucessivamente à direita do anterior, enquanto existir espaço disponível em largura.

Neste exemplo os 3 cartões vão estar todos na mesma linha e alinhados À esquerda
```html
.card {
  float: left;
  width: 25%;
  height: 50px;
}

<div>
	<p class="card"> Contacto1</p>
	<p class="card"> Contacto2</p>
	<p class="card"> Contacto3</p>
</div>
```

Depois de uma secção com elementos float, normalmente queremos que o conteúdo seguinte comece numa linha nova, o que pode não acontecer se existir algum espaço deixado pelos elementos float.
Existe a possibilidade de efectuar um clear do float antes do conteúdo novo, para que este comece sempre numa linha nova.

```css
.card {
  float: left;
  width: 25%;
  height: 50px;
}

.clear {
    clear: both;
}

<div>
	<p class="card"> Contacto1</p>
	<p class="card"> Contacto2</p>
	<p class="card"> Contacto3</p>
</div>
<div class="clear"></div>
```

### Flexbox

A flexbox é um modelo de layout CSS que é muito usada para estruturar uma página html, sendo a base de muitas frameworks css. Tem por base um elemento play com `display: flex;` e uma série de elementos filhos diretos que se organizam mediante a configuração da flexbox.

Por defeito os elementos numa flexbox são colocados lado a lado e ocupam os espaço necessário para o seu conteúdo.

No exemplo seguinte temos uma grid de 3 elementos colocados lado a lado, onde cada elemento tem o seu próprio tamanho.
```css
.box {
	display: flex;
	flex-direction: row; /* valor por defeito */
	gap: 5px; /* espaço a colocar entre os elementos da flexbox*/
}

.box div {
	background-color: chocolate;
	height: 140px;
	padding: 6px;
	box-sizing: border-box;
}
```

```html
<div class="box">
	<div>Info</div>
	<div>News from today</div>
	<div>Feed</div>
</div>
```

Por defeito os elementos ficam alinhados à esquerda. Podemos alterar a disposição dos elementos usando a propriedade `justify-content`.

Por ex. se quisermos os elementos centrados, esta seria a classe `box` :
```css
.grid {
	display: flex;
	flex-direction: row; /* valor por defeito */
	gap: 5px; /* espaço a colocar entre os elementos da flexbox*/
	justify-content: center;
}
```

Se quisermos que os elementos expandam até ocuparem toda a dimensão em largura da flexbox, então devemos utilizar a propriedade `flex` em cada um dos seus elementos:

Por exemplo, colocando `flex: 1` vai fazer com que os elementos se expandam de igual forma até atingirem a largura total da flexbox.
```css
.grid div {
	flex: 1;   /* expande os elementos de forma igual */
	background-color: chocolate;
	height: 140px;
	padding: 6px;
	box-sizing: border-box;
}
```

Na verdade a propriedade `flex` é um atalho para a um subconjunto de outras propriedades.
```css
flex: 0 1 auto /* shortcut for setting flex-grow, flex-shrink, flex-basis */
```

Ver guia completo da [flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/) e este guia [interativo](https://www.joshwcomeau.com/css/interactive-guide-to-flexbox/) do Josh Comeau.

### Grid



## Position

Enquanto o `display` define a forma com o objecto é apresentado a propriedade `position` define o tipo de posicionamento do elemento no fluxo normal do documento.
O fluxo normal do documento efetua o rendering dos elementos nos seguintes termos:

- os elementos com display block usam toda a largura do elemento que o contém, mas a sua altura depende do seu conteúdo
- os elementos block ficam uns por debaixo dos outros, na vertical, de cima para baixo.
- os elementos inline têm a dimensão do seu conteúdo,
- todos os elementos não se sobrepoem e as suas margens colapsam

Existem os seguintes tipos de position:

### `static`

position default de todos os objectos, acompanha o fluxo normal do documento. Neste tipo de position os elementos não são afetados pelas propriedades `top`, `bottom`, `left`, e `right`.

```css
.box div {
  border: 2px solid gray;
  padding: 15px;
  margin: 15px;
}
```
```html
<div class='box'>
	<div>Info</div>
	<div>News</div>
	<div>Feed</div>
</div>
```

![[Pasted image 20231022182411.png|500]]

### `fixed`

Um elemento com este posicionamento vai ser posicionado relativamente ao viewport, ou seja, vai estar sempre na mesma posição mesmo que existe scroll na página. As propriedades top, right, bottom e left são usadas para posicionar o elemento.

Normalmente é usado no posicionamento de menus de navegação que são fixos, ou em popup modals que ficam no centro do viewport.

Os elementos fixed saem fora do fluxo normal do documento, ou seja, não têm nenhum elemento pai que o contém, ou outros elementos não têm noção da existência deste elementos. Isto pode originar a necessidade de colocação de margens extra (por ex. num menu de navegação fixo).

```css
.box div {
  border: 2px solid gray;
  padding: 15px;
  margin: 15px;
}

nav {
  position: fixed;
  background: gray;
  padding: 15px;
  top:0;
  left:0;
  width: 100%
}
```
```html
<nav>nav</nav>

<div class='box'>
	<div>Info</div>
	<div>News</div>
	<div>Feed</div>
</div>
```

![[Pasted image 20231022184026.png|500]]

### `relative` e  `absolute`

O posicionamento `relative` e `absolute` andam normalmente de mãos juntas. O posicionamento `relative`tem por base o `static`mas os elementos podem ser posicionados com as propriedades `top`, `bottom`, `left`, e `right`. Já os elementos posicionados com `absolute` têm por base o posicionamento `fixed`, apenas com a diferença de serem posicionados não relativamente ao viewport , mas relativamente ao primeiro elemento container que esteja posicionado como relative, absolute ou fixed. Se a página tiver scroll, os elementos absolute avançam com o scroll.

Por exemplo:
```css
.box div {
  position: absolute;
  border: 2px solid gray;
  padding: 15px;
  margin: 15px;
  bottom: 0;
  right: 0;
}

.box {
  position: relative;
  height: 200px;
  border: 2px solid blue;
}
```
```html
<div class='box'>
	<div>Info</div>
</div>
```

![[Pasted image 20231022190109.png|500]]

Os cards são normalmente criados com recurso a um container com position `relative`e com os elementos que o constituem com posicionamentos diversos, sendo que o `absolute`  será muito útil em posicionamentos forma do fluxo normal, mas apenas dentro do card container.

No entanto se um elemento posicionado `absolute` não encontrar nenhum elemento pai com posicionamento (relative, absolute, fixed) ele vai-se posicionar relativamente ao `body`do documento.

### `sticky`

Um elemento posicionado como `sticky` fica posicionado de forma `relative`ou `fixed` conforme a posição do scroll. Assume o posicionamento `relative`até um determinado offset for alcançado no viewport. A partir daí fica fixo, assumindo um posicionamento `fixed`.

Neste exemplo temos uma caixa que vai deslizar com o scroll da página, mas ficará fixa quando chegar ao topo do viewport,
```css
 .box {
   position: sticky;
   top: 0px;
}
```

Não é suportado em  IE/Edge 15 ou anterior.

CSS Tricks
https://css-tricks.com/almanac/properties/p/position/



## Responsive web

As páginas web não podem deixar de fora conteúdo para serem apresentadas em ecrãs pequenos, mas sim adaptar-se ao tamanho dos equipamentos: desktop, tablet e telefone.
Menus, imagens, layout de colunas são alguns do principals elementos a de uma página a adaptar.


![[77BE1B6391A32BCFB981B558855B3D46.png]] 
Desktop 

![[F4392B1D1AA8DFFE147A813890C5BC8F.png]]
Tablet 

![[6123D0A656B5738BC2043A370575AA2F.png]] 
Telefone 

Responsive web design vem da capacidade de usar CSS e HTML para redimensionar, esconder, encolher, alargar ou move o conteúdo de uma página para que esta tenha um visualização adequada em qualquer ecrã.

Usar valores % na dimensão de alguns elementos já permite dotar a página de um comportamento responsive, mas em regra queremos adaptar fundamentalmente o seguinte:

- menu
- layout da página
- dark mode


## Menu

Passar a um menu hamburger em mobile

## Layout

Utilizar % para a largura dos elementos grid
Stack em mobile

## Dark mode

Usar o preferred 

## Media queries

```css
@media not|only mediatype and (media feature) {
 // CSS Code;
}
```

As regras CSS usadas para responsive web design são definidas em *media queries*. São regras CSS que  são interpretadas de forma condicional, como por exemplo, ecrãs com uma largura até 480px.

```css
@media screen and (max-width: 480px) {
 // CSS Code;
}
```

Ou por exemplo formatar o fundo de uma página quando o utilizador estiver em dark mode.

```css
@media (prefers-color-scheme: dark) { 
  body {
    background-color: black;
  }
}
```


Existem duas abordagens principais para aplicar as media queries ao CSS. **Mobile based** quando todo o CSS de uma página está pensado para a versão mobile da página e as media queries vão adaptando o site  aos ecrãs maiores. Por seu lado numa abordagem **desktop based** o CSS do site é pensado para a versão base em desktop, e depois as media queries vão adaptando a página para os ecrãs mais pequenos.

### Media queries for a mobile based CSS

```css
@media screen and (min-width: 480px) {
    body {
        background-color: lightgreen;
    }
}
```

### Media queries for a desktop based CSS

```css
@media screen and (max-width: 768px) {
    body {
        background-color: lightgreen;
    }
}
```

### Posicionamento das media queries

Sendo CSS de alteração ao CSS geral da página, o CSS das media queries deverá vir sempre a seguir, no final. 
- Se incluirmos as media queries no styles.css deverá ser colocado no fim do código css geral
- Se criarmos um ficheiro específico para as media queries (ex. mobile.css) o link para ele deverá ser criado a seguir ao link para o styles.css na secção `<head>` da página html


## Exemplo de responsive


## HTML
```html
<!doctype html>
<html>
<head>
    <title>Responsive Site</title>

    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" type="text/css" href="./css/styles.css">
    <link rel="stylesheet" type="text/css" href="./css/mobile.css">

    <style type="text/css">
    </style>

</head>

<body>

    <nav>
        <i class="bi bi-three-dots-vertical"></i>
        <ul>
            <li>About</li>
            <li>Services</li>
            <li>Products</li>
            <li>Contact</li>
        </ul>
    </nav>

    <div class="imageDiv">

    </div>

    <div class="grid">
        <div>A</div>
        <div>B</div>
        <div>C</div>
    </div>
</body>
</html>
```

## CSS & Media queries


```css
        nav li {
            display: inline-block;
            padding: 4px;
        }

        nav i {
            display: none;
        }

        .imageDiv {
            width: 100%;
            height: 200px;
            background-image: url("images/img-desktop.jpg");
            background-size: cover;
        }

        .grid {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 6px;
            gap: 8px;
        }

        .grid div {
            width: 180px;
            height: 140px;
            background-color: rgb(86, 123, 123);
        }

        @media screen and (max-width: 576px) {
            /*** CSS Rules that apply only for screens up to 768px ***/
        
            body {
                background-color: rgb(0, 0, 0);
                color: white;
            }
        
            nav i {
                display: inline-block;
            }
            nav ul {
                display: none;
            }

            .imageDiv {
                height: 400px;
                background-image: url("images/img-mobile.jpg");
            }

            .grid div {
                width: 100%;
            }
        }
```

